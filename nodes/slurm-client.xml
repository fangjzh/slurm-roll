<?xml version="1.0" standalone="no"?>

<kickstart>


	<description>
	slurm client
	</description>

	<copyright>
	Copyright (c) 2000 - 2012 The Regents of the University of California.
	All rights reserved. Rocks(r) v5.5/v6.0 www.rocksclusters.org
	
	</copyright>


<post>

<file name="/opt/rocks/var/plugins/411/slurm_conf.py">

import os
import sys
import stat
import rocks.service411

class Plugin(rocks.service411.Plugin):

        def get_filename(self):
                   return '/etc/slurm/slurm.conf'
        def post(self):
                os.system("scontrol reconfigure")


</file>


<file name="/etc/sysconfig/slurm">
# Ensure the limits we want for large clusters apply to the slurm daemons
ulimit -l unlimited
ulimit -n 8192
</file>

service slurm start

</post>

</kickstart>
